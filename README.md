# 실시간 자세교정 웹 애플리케이션

웹캠을 활용한 실시간 자세 감지 및 교정 웹 애플리케이션입니다.

## 📋 프로젝트 개요

### 🎯 **개발 목표**

- 웹캠을 통한 실시간 자세 감지 및 교정
- 사용자 친화적인 자세 분석 및 피드백 제공
- 의료진과의 상담을 위한 데이터 내보내기 기능
- 자세 개선 추이를 시각적으로 분석

### 🚀 **배포 정보**

- **현재 배포**: Vercel - https://posture-check-app.vercel.app/
- **예정 배포**: AWS EC2, FastAPI(on Render) + Supabase(PostgreSQL)

## 🛠 기술 스택

### Frontend

- **React 19.1.0** - 사용자 인터페이스 구축
- **Vite 6.3.5** - 빠른 개발 환경 및 빌드 도구
- **Styled-components 6.1.19** - CSS-in-JS 스타일링
- **Zustand 5.0.5** - 상태 관리
- **MediaPipe Pose 0.5.1675469404** - 실시간 인체 포즈 감지
- **Recharts** - 데이터 시각화
- **XLSX 0.18.5** - 엑셀 파일 생성

### Backend (예정)

- **FastAPI** - 백엔드 API
- **Supabase** - PostgreSQL 데이터베이스

## 📁 프로젝트 구조

```
src/
├── assets/          # 이미지, 폰트 등 정적 파일
├── components/      # 재사용 가능한 컴포넌트
│   ├── common/     # 공통 컴포넌트
│   └── layout/     # 레이아웃 관련 컴포넌트
├── hooks/          # 커스텀 훅
├── pages/          # 페이지 컴포넌트
├── store/          # Zustand 스토어
├── styles/         # 전역 스타일 및 테마
└── utils/          # 유틸리티 함수
```

## 🚀 시작하기

```bash
# 의존성 설치
yarn install

# 개발 서버 실행
yarn dev

# 빌드
yarn build
```

## 🔍 주요 기능

### 1. 실시간 자세 감지

- **MediaPipe Pose** 기반 실시간 인체 포즈 감지
- 웹캠을 통한 실시간 자세 분석
- 시각적 피드백 (랜드마크, 뼈대, 상태별 색상)

### 2. 자세 분석 지표

- **목 각도**: 코와 어깨 중점 사이의 각도
- **어깨 기울기**: 좌우 어깨의 기울기
- **머리 전방 돌출도**: 머리가 앞으로 나온 정도
- **어깨 높이 차이**: 좌우 어깨 높이의 차이

### 3. 데이터 관리

- **로컬 스토리지**: 브라우저에 안전한 데이터 저장
- **CSV/Excel 내보내기**: 의료진 상담 자료로 활용
- **시간별 필터링**: 원하는 기간의 데이터만 조회
- **데이터 초기화**: 필요시 모든 기록 삭제

### 4. 시각화 및 통계

- **점수 변화 그래프**: 자세 개선 추이 시각화
- **통계 대시보드**: 8개 주요 지표 카드
- **히스토리 테이블**: 상세한 자세 기록 (접기/펼치기 기능)
- **페이지네이션**: 대용량 데이터 효율적 표시

## 📅 개발 진행 상황

### Phase 1: 기본 자세 감지 시스템 구축 (2024년 12월 초)

#### ✅ **구현 완료**

- MediaPipe Pose 라이브러리 통합
- 웹캠 스트림 처리 및 Canvas 시각화
- 기본 자세 측정 지표 (목 각도, 어깨 기울기)
- Zustand를 통한 전역 상태 관리

#### 🔧 **사용된 라이브러리**

```bash
npm install @mediapipe/pose @mediapipe/camera_utils @mediapipe/drawing_utils
```

#### ⚙️ **성능 설정**

```javascript
{
  modelComplexity: 1,        // 균형잡힌 성능과 정확도
  smoothLandmarks: true,     // 부드러운 포즈 추적
  minDetectionConfidence: 0.5,
  minTrackingConfidence: 0.5
}
```

---

### Phase 2: 자세 기준 개선 및 사용자 경험 향상 (2024년 12월 중)

#### ✅ **구현 완료**

1. **관대한 자세 기준 적용**

   ```javascript
   // 개선된 자세 기준
   목 각도: -30° ~ 30° (기존 -20° ~ 20°)
   어깨 기울기: -15° ~ 15° (기존 -10° ~ 10°)
   머리 전방 돌출도: ≤ 20% (기존 ≤ 15%)
   어깨 높이 차이: ≤ 12% (기존 ≤ 8%)
   ```

2. **점수 시스템 최적화**

   - 80점 이상: "좋음" (기존 85점)
   - 65-79점: "보통" (기존 70점)
   - 50-64점: "주의"
   - 50점 미만: "나쁨"

3. **알림 시스템 개선**
   - 50점 미만일 때만 알림 (기존 60점)
   - 65점 이상이면 알림 해제 (기존 70점)

---

### Phase 3: 데이터 관리 및 내보내기 기능 (2024년 12월 중후반)

#### ✅ **구현 완료**

1. **CSV 내보내기 기능**

   ```javascript
   // CSV 파일 구성
   파일명: 자세데이터_YYYY-MM-DD.csv
   한글 지원: BOM 추가로 깨짐 방지
   컬럼: 날짜/시간, 점수, 상태, 목각도, 어깨기울기,
         머리전방돌출도, 어깨높이차이, 자세피드백
   ```

2. **엑셀 리포트 기능**

   - XLSX 라이브러리 활용
   - 워크시트 구성: 자세 데이터 + 통계 요약
   - 점수별 셀 색상 구분
   - 열 너비 자동 조정

3. **데이터 관리**
   - 로컬 스토리지 활용
   - 데이터 초기화 기능
   - 시간별 필터링 (전체/오늘/이번 주/이번 달)

---

### Phase 4: 시각화 및 UI/UX 대폭 개선 (2024년 12월 말)

#### ✅ **구현 완료**

1. **실시간 점수 변화 그래프**

   ```bash
   # 필요한 패키지 설치
   yarn add recharts react-is
   ```

   - **Area Chart**: 부드러운 영역 그래프
   - **최근 50개 데이터**: 성능 최적화
   - **반응형 디자인**: 화면 크기 자동 조정
   - **인터랙티브 툴팁**: 마우스 오버 시 상세 정보

2. **UI/UX 개선사항**

   - 히스토리 테이블 접기/펼치기 기능
   - 페이지네이션 (20개씩 표시)
   - 점수별 색상 구분
   - 8개 주요 통계 지표 카드

3. **성능 최적화**
   - useCallback 훅으로 불필요한 리렌더링 방지
   - 메모이제이션을 통한 계산 최적화
   - 데이터 제한으로 렌더링 성능 향상

---

### Phase 5: 자세 점수 시스템 대폭 개선 (2024년 12월 말)

#### ✅ **구현 완료**

1. **4단계 점수 구간 시스템**

   ```javascript
   // 새로운 점수 구간 (0-100점)
   - 90-100점: 완벽한 자세 (파란색)
   - 60-89점: 좋은 자세 (초록색)
   - 50-59점: 보통 자세 (주황색)
   - 0-49점: 나쁜 자세 (빨간색)
   ```

2. **자세 감지 기준 최적화**

   ```javascript
   // 개선된 자세 감지 기준
   1. 목 각도: -45° ~ 45° (기존 -30° ~ 30°)
   2. 어깨 기울기: -25° ~ 25° (기존 -15° ~ 15°)
   3. 머리 전방 돌출도: ≤ 20% (유지)
   4. 어깨 높이 차이: ≤ 12% (유지)
   ```

3. **점수 계산 로직 개선**

   - **총 감점 방식**: 각 항목별 점수 차감에서 총 감점 계산으로 변경
   - **균형잡힌 감점**: 목각도(12점), 어깨기울기(10점), 머리돌출(12점), 어깨높이(8점)
   - **최대 감점 제한**: 42점으로 최소 58점 보장

4. **자세 피드백 시스템 고도화**
   - 구체적인 개선 가이드 제공 (문제점 + 해결책)
   - 4단계 색상 시스템 도입
   - 페이지네이션 시스템 구현 (20개씩)
   - 히스토리 테이블 토글 기능

## 📚 참고 자료

- [개발 포트폴리오 블로그](https://velog.io/@c_d_c/%EC%9B%B9%EC%95%B1-FullStack-%EA%B0%9C%EB%B0%9C%EC%9E%90-%EC%B7%A8%EC%97%85-%EC%A4%80%EB%B9%84-%EC%9D%BC%EA%B8%B0-%EA%B0%9C%EB%B0%9C-%ED%8F%AC%ED%8F%BC%EC%9D%84-%EC%9C%84%ED%95%9C-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EA%B5%AC%EC%84%B1-%EC%8B%A4%EC%8B%9C%EA%B0%84-%EC%9E%90%EC%84%B8-%EA%B5%90%EC%A0%95-%EC%95%B1-%EB%A7%8C%EB%93%A4%EA%B8%B0...ing)

## 📞 문의 및 지원

프로젝트 관련 문의사항이나 개선 제안이 있으시면 언제든 연락주세요!

**개발자**: LeeJaeSung  
**이메일**: lee940706@gmail.com  
**블로그**: https://velog.io/@c_d_c

## �� 라이선스

MIT License
